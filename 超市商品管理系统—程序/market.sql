-- MySQL Script generated by MySQL Workbench
-- Tue Jun  9 00:41:45 2020
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema SCMS
-- -----------------------------------------------------
DROP SCHEMA IF EXISTS `SCMS` ;

-- -----------------------------------------------------
-- Schema SCMS
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `SCMS` DEFAULT CHARACTER SET utf8 ;
USE `SCMS` ;

-- -----------------------------------------------------
-- Table `SCMS`.`Customer`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `SCMS`.`Customer` ;

CREATE TABLE IF NOT EXISTS `SCMS`.`Customer` (
  `Cid` VARCHAR(10) NOT NULL DEFAULT 'C0000',
  `Cname` VARCHAR(10) NULL,
  `Cphone` VARCHAR(15) NULL,
  `Caddress` VARCHAR(45) NULL,
  `VIPpoints` INT NULL DEFAULT 0,
  `VIPbalance` FLOAT NULL,
  PRIMARY KEY (`Cid`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `SCMS`.`Warehouse`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `SCMS`.`Warehouse` ;

CREATE TABLE IF NOT EXISTS `SCMS`.`Warehouse` (
  `Wid` VARCHAR(5) NOT NULL DEFAULT 'W000',
  `Waddress` VARCHAR(45) NULL,
  `WkeeperName` VARCHAR(10) NULL,
  `WkeeperPhone` VARCHAR(15) NULL,
  PRIMARY KEY (`Wid`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `SCMS`.`Goods`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `SCMS`.`Goods` ;

CREATE TABLE IF NOT EXISTS `SCMS`.`Goods` (
  `Gid` VARCHAR(10) NOT NULL DEFAULT 'G000',
  `Gname` VARCHAR(20) NULL,
  `Gtype` VARCHAR(10) NULL,
  `Gprice` FLOAT NULL,
  `Gquantity` INT NULL,
  `GneedPoints` INT NULL,
  `Warehouse_Wid` VARCHAR(5) NOT NULL,
  PRIMARY KEY (`Gid`),
  INDEX `fk_Goods_Warehouse1_idx` (`Warehouse_Wid` ASC) VISIBLE,
  CONSTRAINT `fk_Goods_Warehouse1`
    FOREIGN KEY (`Warehouse_Wid`)
    REFERENCES `SCMS`.`Warehouse` (`Wid`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `SCMS`.`Supplier`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `SCMS`.`Supplier` ;

CREATE TABLE IF NOT EXISTS `SCMS`.`Supplier` (
  `Sid` VARCHAR(5) NOT NULL DEFAULT 'S000',
  `Sname` VARCHAR(10) NULL,
  `ScontactName` VARCHAR(10) NULL,
  `ScontactPhone` VARCHAR(15) NULL,
  `Saddress` VARCHAR(45) NULL,
  PRIMARY KEY (`Sid`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `SCMS`.`Manager`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `SCMS`.`Manager` ;

CREATE TABLE IF NOT EXISTS `SCMS`.`Manager` (
  `MuserName` VARCHAR(10) NOT NULL,
  `Mpassword` VARCHAR(45) NULL,
  `Mname` VARCHAR(10) NULL,
  `Msex` CHAR(2) NULL,
  `MidCard` CHAR(18) NULL,
  `Mphone` VARCHAR(11) NULL,
  `Memail` VARCHAR(45) NULL,
  PRIMARY KEY (`MuserName`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `SCMS`.`Customer_purchase_Goods`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `SCMS`.`Customer_purchase_Goods` ;

CREATE TABLE IF NOT EXISTS `SCMS`.`Customer_purchase_Goods` (
  `Pid` VARCHAR(10) NOT NULL DEFAULT 'P00000',
  `Customer_Cid` VARCHAR(10) NOT NULL,
  `Goods_Gid` VARCHAR(10) NOT NULL,
  `Pquantity` INT NULL,
  `PtotalMoney` FLOAT NULL,
  `PpayMethod` VARCHAR(10) NULL,
  `PaddPoints` INT NULL,
  `Pdate` DATE NULL,
  PRIMARY KEY (`Pid`, `Customer_Cid`, `Goods_Gid`),
  INDEX `fk_Customer_purchase_Goods_Customer1_idx` (`Customer_Cid` ASC) VISIBLE,
  INDEX `fk_Customer_purchase_Goods_Goods1_idx` (`Goods_Gid` ASC) VISIBLE,
  INDEX `ind_payMethod` (`PpayMethod` ASC) VISIBLE,
  CONSTRAINT `fk_Customer_purchase_Goods_Customer1`
    FOREIGN KEY (`Customer_Cid`)
    REFERENCES `SCMS`.`Customer` (`Cid`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Customer_purchase_Goods_Goods1`
    FOREIGN KEY (`Goods_Gid`)
    REFERENCES `SCMS`.`Goods` (`Gid`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `SCMS`.`Goods_contract_Supplier`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `SCMS`.`Goods_contract_Supplier` ;

CREATE TABLE IF NOT EXISTS `SCMS`.`Goods_contract_Supplier` (
  `CTid` VARCHAR(10) NOT NULL DEFAULT 'CT0000',
  `Goods_Gid` VARCHAR(10) NOT NULL,
  `Supplier_Sid` VARCHAR(5) NOT NULL,
  `CTunitPrice` FLOAT NULL,
  `CTquantity` INT NULL,
  `CTtotalMoney` FLOAT NULL,
  `CTdate` DATE NULL,
  `CTnote` VARCHAR(45) NULL,
  PRIMARY KEY (`CTid`, `Goods_Gid`, `Supplier_Sid`),
  INDEX `fk_Goods_contract_Supplier_Goods1_idx` (`Goods_Gid` ASC) VISIBLE,
  INDEX `fk_Goods_contract_Supplier_Supplier1_idx` (`Supplier_Sid` ASC) VISIBLE,
  CONSTRAINT `fk_Goods_contract_Supplier_Goods1`
    FOREIGN KEY (`Goods_Gid`)
    REFERENCES `SCMS`.`Goods` (`Gid`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Goods_contract_Supplier_Supplier1`
    FOREIGN KEY (`Supplier_Sid`)
    REFERENCES `SCMS`.`Supplier` (`Sid`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `SCMS`.`Customer_return_Goods`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `SCMS`.`Customer_return_Goods` ;

CREATE TABLE IF NOT EXISTS `SCMS`.`Customer_return_Goods` (
  `Rid` VARCHAR(10) NOT NULL DEFAULT 'R00000',
  `Customer_Cid` VARCHAR(10) NOT NULL,
  `Purchase_Pid` VARCHAR(10) BINARY NULL,
  `Goods_Gname` VARCHAR(45) NULL,
  `Rquantity` INT NULL,
  `Rreason` VARCHAR(45) NULL,
  `Rdate` DATE NULL,
  `Rstate` INT NOT NULL DEFAULT 0,
  PRIMARY KEY (`Rid`, `Customer_Cid`),
  INDEX `fk_Customer_return_Goods_Customer1_idx` (`Customer_Cid` ASC) VISIBLE,
  CONSTRAINT `fk_Customer_return_Goods_Customer1`
    FOREIGN KEY (`Customer_Cid`)
    REFERENCES `SCMS`.`Customer` (`Cid`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

USE `SCMS`;

-- -----------------------------------------------------
-- First data for all tables  为了实现VARCHAR自增
-- -----------------------------------------------------

-- customer
INSERT INTO `SCMS`.`Customer` (`Cid`, `Cname`, `Cphone`, `Caddress`, `VIPpoints`, `VIPbalance`) VALUES ('C0001', '张三', '19823456789', '余杭区仓前街道余杭塘路2318号', 50, 1000);

-- warehouse
INSERT INTO `SCMS`.`Warehouse` (`Wid`, `Waddress`, `WkeeperName`, `WkeeperPhone`) VALUES ('W001', '杭州市食品一号', '曹八', '18667359283');

-- goods
INSERT INTO `SCMS`.`Goods` (`Gid`, `Gname`, `Gtype`, `Gprice`, `Gquantity`, `GneedPoints`, `Warehouse_Wid`) VALUES ('G001', '可乐', '食品', 2.8, 510, 28, 'W001');

-- supplier
INSERT INTO `SCMS`.`Supplier` (`Sid`, `Sname`, `ScontactName`, `ScontactPhone`, `Saddress`) VALUES ('S001', '杭州食品加工厂', '唐三', '15627357132', '余杭区良睦路200号');

-- customer_purchase_goods
INSERT INTO `SCMS`.`Customer_purchase_Goods` (`Pid`, `Customer_Cid`, `Goods_Gid`, `Pquantity`, `PtotalMoney`, `PpayMethod`, `PaddPoints`, `Pdate`) VALUES ('P00001', 'C0001', 'G005', 1, 50, 'VIPcard', 50, '2020/06/05');

-- goods_contract_supplier
INSERT INTO `SCMS`.`Goods_contract_Supplier` (`CTid`, `Goods_Gid`, `Supplier_Sid`, `CTunitPrice`, `CTquantity`, `CTtotalMoney`, `CTdate`, `CTnote`) VALUES ('CT0001', 'G001', 'S001', 2, 255, 510, '2020/06/04', '');

-- customer_return_goods
INSERT INTO `SCMS`.`Customer_return_Goods` (`Rid`, `Customer_Cid`, `Purchase_Pid`, `Goods_Gname`, `Rquantity`, `Rreason`, `Rdate`, `Rstate`) VALUES ('R00001', 'C0007', 'P00009', '碗', 5, '不喜欢了', '2020/06/08', 0);


-- -----------------------------------------------------
-- -----------------------------------------------------
-- Add triggers
-- -----------------------------------------------------
-- -----------------------------------------------------
DELIMITER $$

-- -----------------------------------------------------
-- Trigger实现VARCHAR编号自增
-- -----------------------------------------------------

-- Trigger for Customer_BEFORE_INSERT
USE `SCMS`$$
DROP TRIGGER IF EXISTS `SCMS`.`Customer_BEFORE_INSERT` $$
USE `SCMS`$$
CREATE DEFINER = CURRENT_USER TRIGGER `SCMS`.`Customer_BEFORE_INSERT` BEFORE INSERT ON `Customer` FOR EACH ROW
BEGIN
	SET new.Cid=CONCAT('C',
		LPAD(((SELECT SUBSTRING(Cid,2,4) FROM Customer WHERE Cid=(
			SELECT Cid FROM Customer ORDER BY Cid DESC LIMIT 1))+1),4,0));
END$$


-- Trigger for Warehouse_BEFORE_INSERT
USE `SCMS`$$
DROP TRIGGER IF EXISTS `SCMS`.`Warehouse_BEFORE_INSERT` $$
USE `SCMS`$$
CREATE DEFINER = CURRENT_USER TRIGGER `SCMS`.`Warehouse_BEFORE_INSERT` BEFORE INSERT ON `Warehouse` FOR EACH ROW
BEGIN
	SET new.Wid=CONCAT('W',
		LPAD(((SELECT SUBSTRING(Wid,2,3) FROM Warehouse WHERE Wid=(
			 SELECT Wid FROM Warehouse ORDER BY Wid DESC LIMIT 1))+1),3,0));
END$$


-- Trigger for Goods_BEFORE_INSERT
USE `SCMS`$$
DROP TRIGGER IF EXISTS `SCMS`.`Goods_BEFORE_INSERT` $$
USE `SCMS`$$
CREATE DEFINER = CURRENT_USER TRIGGER `SCMS`.`Goods_BEFORE_INSERT` BEFORE INSERT ON `Goods` FOR EACH ROW
BEGIN
	SET new.Gid=CONCAT('G',
		LPAD(((SELECT SUBSTRING(Gid,2,3) FROM Goods WHERE Gid=(
			 SELECT Gid FROM Goods ORDER BY Gid DESC LIMIT 1))+1),3,0));
END$$


-- Trigger for Supplier_BEFORE_INSERT
USE `SCMS`$$
DROP TRIGGER IF EXISTS `SCMS`.`Supplier_BEFORE_INSERT` $$
USE `SCMS`$$
CREATE DEFINER = CURRENT_USER TRIGGER `SCMS`.`Supplier_BEFORE_INSERT` BEFORE INSERT ON `Supplier` FOR EACH ROW
BEGIN
	SET new.Sid=CONCAT('S',
		LPAD(((SELECT SUBSTRING(Sid,2,3) FROM Supplier WHERE Sid=(
			 SELECT Sid FROM Supplier ORDER BY Sid DESC LIMIT 1))+1),3,0));
END$$


-- Trigger for Customer_purchase_Goods_BEFORE_INSERT_1
USE `SCMS`$$
DROP TRIGGER IF EXISTS `SCMS`.`Customer_purchase_Goods_BEFORE_INSERT_1` $$
USE `SCMS`$$
CREATE DEFINER = CURRENT_USER TRIGGER `SCMS`.`Customer_purchase_Goods_BEFORE_INSERT_1` BEFORE INSERT ON `Customer_purchase_Goods` FOR EACH ROW
BEGIN
	-- SET Pid
	SET new.Pid=CONCAT('P',
		LPAD(((SELECT SUBSTRING(Pid,2,5) FROM Customer_purchase_Goods WHERE Pid=(
			 SELECT Pid FROM Customer_purchase_Goods ORDER BY Pid DESC LIMIT 1))+1),5,0));
	
    -- SET PaddPoints
    IF(new.PpayMethod!='VIPpoints') THEN
		SET new.PaddPoints=new.PtotalMoney;
    END IF;
END$$


-- Trigger for Customer_purchase_Goods_AFTER_INSERT
USE `SCMS`$$
DROP TRIGGER IF EXISTS `SCMS`.`Customer_purchase_Goods_AFTER_INSERT` $$
USE `SCMS`$$
CREATE DEFINER = CURRENT_USER TRIGGER `SCMS`.`Customer_purchase_Goods_AFTER_INSERT` AFTER INSERT ON `Customer_purchase_Goods` FOR EACH ROW
BEGIN
    -- UPDATE Customer.VIPcard
        IF(new.PpayMethod='VIPcard') THEN
			UPDATE Customer
            SET VIPbalance=VIPbalance-new.PtotalMoney
			WHERE new.Customer_Cid=customer.Cid;
		END IF;
        
	-- UPDATE Customer.VIPpoints
	IF(new.PpayMethod!='VIPpoints') THEN
		UPDATE Customer
		SET VIPpoints=VIPpoints+new.PaddPoints
        WHERE new.Customer_Cid=customer.Cid;
	ELSE 
		UPDATE Customer
		SET VIPpoints=VIPpoints-new.PtotalMoney*10
        WHERE new.Customer_Cid=customer.Cid;
    END IF;
    
    -- UPDATE Goods.Gquantity
    UPDATE Goods
	SET Gquantity=Gquantity-new.Pquantity
	WHERE Gid=new.Goods_Gid;
END$$


-- Trigger for Goods_contract_Supplier_BEFORE_INSERT
USE `SCMS`$$
DROP TRIGGER IF EXISTS `SCMS`.`Goods_contract_Supplier_BEFORE_INSERT` $$
USE `SCMS`$$
CREATE DEFINER = CURRENT_USER TRIGGER `SCMS`.`Goods_contract_Supplier_BEFORE_INSERT` BEFORE INSERT ON `Goods_contract_Supplier` FOR EACH ROW
BEGIN
	SET new.CTid=CONCAT('CT',
		LPAD(((SELECT SUBSTRING(CTid,3,4) FROM Goods_contract_Supplier WHERE CTid=(
			 SELECT CTid FROM Goods_contract_Supplier ORDER BY CTid DESC LIMIT 1))+1),4,0));
END$$


-- Trigger for Customer_return_Goods_BEFORE_INSERT
USE `SCMS`$$
DROP TRIGGER IF EXISTS `SCMS`.`Customer_return_Goods_BEFORE_INSERT` $$
USE `SCMS`$$
CREATE DEFINER = CURRENT_USER TRIGGER `SCMS`.`Customer_return_Goods_BEFORE_INSERT` BEFORE INSERT ON `Customer_return_Goods` FOR EACH ROW
BEGIN
	SET new.Rid=CONCAT('R',
		LPAD(((SELECT SUBSTRING(Rid,2,5) FROM Customer_return_Goods WHERE Rid=(
			 SELECT Rid FROM Customer_return_Goods ORDER BY Rid DESC LIMIT 1))+1),5,0));
END$$


DELIMITER ;

-- -----------------------------------------------------
-- Data for table `SCMS`.`Customer`
-- -----------------------------------------------------
START TRANSACTION;
USE `SCMS`;
INSERT INTO `SCMS`.`Customer` (`Cid`, `Cname`, `Cphone`, `Caddress`, `VIPpoints`, `VIPbalance`) VALUES ('C0002', '李四', '12343215427', '余杭区文一西路2300号', 0, 300);
INSERT INTO `SCMS`.`Customer` (`Cid`, `Cname`, `Cphone`, `Caddress`, `VIPpoints`, `VIPbalance`) VALUES ('C0003', '王五', '13526785419', '余杭区仓前街道余杭塘路2427号', 0, 0);
INSERT INTO `SCMS`.`Customer` (`Cid`, `Cname`, `Cphone`, `Caddress`, `VIPpoints`, `VIPbalance`) VALUES ('C0004', '魏璎珞', '15823673419', '余杭区良睦路2305号', 0, 0);
INSERT INTO `SCMS`.`Customer` (`Cid`, `Cname`, `Cphone`, `Caddress`, `VIPpoints`, `VIPbalance`) VALUES ('C0005', '艾莉', '16724510472', '余杭区仓前街道余杭塘路2311号', 0, 300);
INSERT INTO `SCMS`.`Customer` (`Cid`, `Cname`, `Cphone`, `Caddress`, `VIPpoints`, `VIPbalance`) VALUES ('C0006', '宋麦', '17825362942', '余杭区仓前街道余杭塘路2521号', 0, 500);
INSERT INTO `SCMS`.`Customer` (`Cid`, `Cname`, `Cphone`, `Caddress`, `VIPpoints`, `VIPbalance`) VALUES ('C0007', '谢阿鹏', '11111198237', '余杭区仓前街道余杭塘路2000号', 0, 2000);
INSERT INTO `SCMS`.`Customer` (`Cid`, `Cname`, `Cphone`, `Caddress`, `VIPpoints`, `VIPbalance`) VALUES ('C0008', '宁一', '15273813751', '余杭区仓前街道余杭塘路2090号', 0, 0);
INSERT INTO `SCMS`.`Customer` (`Cid`, `Cname`, `Cphone`, `Caddress`, `VIPpoints`, `VIPbalance`) VALUES ('C0009', '李政勋', '16472472393', '余杭区良睦路300号', 0, 400);
INSERT INTO `SCMS`.`Customer` (`Cid`, `Cname`, `Cphone`, `Caddress`, `VIPpoints`, `VIPbalance`) VALUES ('C0010', '李二', '18936734628', '余杭区仓前街道余杭塘路231号', 0, 350);
INSERT INTO `SCMS`.`Customer` (`Cid`, `Cname`, `Cphone`, `Caddress`, `VIPpoints`, `VIPbalance`) VALUES ('C0011', '张六', '12352673473', '余杭区文一西路987号', 0, 567);
INSERT INTO `SCMS`.`Customer` (`Cid`, `Cname`, `Cphone`, `Caddress`, `VIPpoints`, `VIPbalance`) VALUES ('C0012', '赵谦', '14589343233', '余杭区仓前街道余杭塘路20号', 0, 600);
INSERT INTO `SCMS`.`Customer` (`Cid`, `Cname`, `Cphone`, `Caddress`, `VIPpoints`, `VIPbalance`) VALUES ('C0013', '五一', '16812243233', '余杭区仓前街道余杭塘路543号', 0, 400);
INSERT INTO `SCMS`.`Customer` (`Cid`, `Cname`, `Cphone`, `Caddress`, `VIPpoints`, `VIPbalance`) VALUES ('C0014', 'Shaking', '14234232378', '余杭区高教路290号', 0, 0);
INSERT INTO `SCMS`.`Customer` (`Cid`, `Cname`, `Cphone`, `Caddress`, `VIPpoints`, `VIPbalance`) VALUES ('C0015', 'Olivia', '14234238906', '余杭区仓前街道余杭塘路2990号', 0, 0);
INSERT INTO `SCMS`.`Customer` (`Cid`, `Cname`, `Cphone`, `Caddress`, `VIPpoints`, `VIPbalance`) VALUES ('C0016', '胡八一', '14237897898', '余杭区仓前街道余杭塘路2908号', 0, 0);
INSERT INTO `SCMS`.`Customer` (`Cid`, `Cname`, `Cphone`, `Caddress`, `VIPpoints`, `VIPbalance`) VALUES ('C0017', '刘雨昕', '14757456458', '余杭区高教路800号', 0, 0);
INSERT INTO `SCMS`.`Customer` (`Cid`, `Cname`, `Cphone`, `Caddress`, `VIPpoints`, `VIPbalance`) VALUES ('C0018', '刘', '10057450008', '余杭区高教路45号', 0, 2000);

COMMIT;


-- -----------------------------------------------------
-- Data for table `SCMS`.`Warehouse`
-- -----------------------------------------------------
START TRANSACTION;
USE `SCMS`;
INSERT INTO `SCMS`.`Warehouse` (`Wid`, `Waddress`, `WkeeperName`, `WkeeperPhone`) VALUES ('W002', '杭州市日用品一号', '汤九', '16742452670');
INSERT INTO `SCMS`.`Warehouse` (`Wid`, `Waddress`, `WkeeperName`, `WkeeperPhone`) VALUES ('W003', '杭州市衣物一号', '汤十', '16742452670');

COMMIT;


-- -----------------------------------------------------
-- Data for table `SCMS`.`Goods`
-- -----------------------------------------------------
START TRANSACTION;
USE `SCMS`;
INSERT INTO `SCMS`.`Goods` (`Gid`, `Gname`, `Gtype`, `Gprice`, `Gquantity`, `GneedPoints`, `Warehouse_Wid`) VALUES ('G002', '速溶咖啡', '食品', 5, 161, 50, 'W001');
INSERT INTO `SCMS`.`Goods` (`Gid`, `Gname`, `Gtype`, `Gprice`, `Gquantity`, `GneedPoints`, `Warehouse_Wid`) VALUES ('G003', '吐司', '食品', 10, 105, 100, 'W001');
INSERT INTO `SCMS`.`Goods` (`Gid`, `Gname`, `Gtype`, `Gprice`, `Gquantity`, `GneedPoints`, `Warehouse_Wid`) VALUES ('G004', '毛巾', '日用品', 30, 203, 300, 'W002');
INSERT INTO `SCMS`.`Goods` (`Gid`, `Gname`, `Gtype`, `Gprice`, `Gquantity`, `GneedPoints`, `Warehouse_Wid`) VALUES ('G005', '免洗洗手液', '日用品', 50, 160, 500, 'W002');
INSERT INTO `SCMS`.`Goods` (`Gid`, `Gname`, `Gtype`, `Gprice`, `Gquantity`, `GneedPoints`, `Warehouse_Wid`) VALUES ('G006', '本子', '日用品', 5, 310, 50, 'W002');
INSERT INTO `SCMS`.`Goods` (`Gid`, `Gname`, `Gtype`, `Gprice`, `Gquantity`, `GneedPoints`, `Warehouse_Wid`) VALUES ('G007', '棒球帽', '衣物', 60, 120, 600, 'W003');
INSERT INTO `SCMS`.`Goods` (`Gid`, `Gname`, `Gtype`, `Gprice`, `Gquantity`, `GneedPoints`, `Warehouse_Wid`) VALUES ('G008', '镜子', '日用品', 30, 223, 300, 'W002');
INSERT INTO `SCMS`.`Goods` (`Gid`, `Gname`, `Gtype`, `Gprice`, `Gquantity`, `GneedPoints`, `Warehouse_Wid`) VALUES ('G009', '螺蛳粉', '食品', 20, 150, 200, 'W001');
INSERT INTO `SCMS`.`Goods` (`Gid`, `Gname`, `Gtype`, `Gprice`, `Gquantity`, `GneedPoints`, `Warehouse_Wid`) VALUES ('G010', '手表', '日用品', 150, 101, 1500, 'W002');
INSERT INTO `SCMS`.`Goods` (`Gid`, `Gname`, `Gtype`, `Gprice`, `Gquantity`, `GneedPoints`, `Warehouse_Wid`) VALUES ('G011', '碗', '日用品', 59, 210, 590, 'W002');
INSERT INTO `SCMS`.`Goods` (`Gid`, `Gname`, `Gtype`, `Gprice`, `Gquantity`, `GneedPoints`, `Warehouse_Wid`) VALUES ('G012', '袜子', '日用品', 10, 270, 100, 'W003');
INSERT INTO `SCMS`.`Goods` (`Gid`, `Gname`, `Gtype`, `Gprice`, `Gquantity`, `GneedPoints`, `Warehouse_Wid`) VALUES ('G013', '菠萝蜜', '果蔬', 30, 50, 0, 'W001');
INSERT INTO `SCMS`.`Goods` (`Gid`, `Gname`, `Gtype`, `Gprice`, `Gquantity`, `GneedPoints`, `Warehouse_Wid`) VALUES ('G014', '榴莲', '果蔬', 300, 10, 0, 'W001');
INSERT INTO `SCMS`.`Goods` (`Gid`, `Gname`, `Gtype`, `Gprice`, `Gquantity`, `GneedPoints`, `Warehouse_Wid`) VALUES ('G015', '西瓜', '果蔬', 25, 60, 0, 'W001');

COMMIT;


-- -----------------------------------------------------
-- Data for table `SCMS`.`Supplier`
-- -----------------------------------------------------
START TRANSACTION;
USE `SCMS`;
INSERT INTO `SCMS`.`Supplier` (`Sid`, `Sname`, `ScontactName`, `ScontactPhone`, `Saddress`) VALUES ('S002', '杭州日用品加工厂', '方木', '10287865345', '余杭区文一西路320号');
INSERT INTO `SCMS`.`Supplier` (`Sid`, `Sname`, `ScontactName`, `ScontactPhone`, `Saddress`) VALUES ('S003', '杭州家纺厂', '刘七', '14238468372', '余杭区高教路98号');
INSERT INTO `SCMS`.`Supplier` (`Sid`, `Sname`, `ScontactName`, `ScontactPhone`, `Saddress`) VALUES ('S004', '杭州种植园', '虎子', '13454364572', '余杭区高教路234号');

COMMIT;


-- -----------------------------------------------------
-- Data for table `SCMS`.`Manager`
-- -----------------------------------------------------
START TRANSACTION;
USE `SCMS`;
INSERT INTO `SCMS`.`Manager` (`MuserName`, `Mpassword`, `Mname`, `Msex`, `MidCard`, `Mphone`, `Memail`) VALUES ('susu', '123456', '小胡', '女', '330182111111110000', '19888888888', '818@163.com');

COMMIT;


-- -----------------------------------------------------
-- Data for table `SCMS`.`Customer_purchase_Goods`
-- -----------------------------------------------------
START TRANSACTION;
USE `SCMS`;
INSERT INTO `SCMS`.`Customer_purchase_Goods` (`Pid`, `Customer_Cid`, `Goods_Gid`, `Pquantity`, `PtotalMoney`, `PpayMethod`, `PaddPoints`, `Pdate`) VALUES ('P00002', 'C0002', 'G003', 5, 50, 'cash', 50, '2020/06/05');
INSERT INTO `SCMS`.`Customer_purchase_Goods` (`Pid`, `Customer_Cid`, `Goods_Gid`, `Pquantity`, `PtotalMoney`, `PpayMethod`, `PaddPoints`, `Pdate`) VALUES ('P00003', 'C0002', 'G002', 1, 5, 'VIPpoints', 0, '2020/06/05');
INSERT INTO `SCMS`.`Customer_purchase_Goods` (`Pid`, `Customer_Cid`, `Goods_Gid`, `Pquantity`, `PtotalMoney`, `PpayMethod`, `PaddPoints`, `Pdate`) VALUES ('P00004', 'C0001', 'G010', 1, 150, 'VIPcard', 150, '2020/06/05');
INSERT INTO `SCMS`.`Customer_purchase_Goods` (`Pid`, `Customer_Cid`, `Goods_Gid`, `Pquantity`, `PtotalMoney`, `PpayMethod`, `PaddPoints`, `Pdate`) VALUES ('P00005', 'C0003', 'G007', 2, 120, 'cash', 120, '2020/06/05');
INSERT INTO `SCMS`.`Customer_purchase_Goods` (`Pid`, `Customer_Cid`, `Goods_Gid`, `Pquantity`, `PtotalMoney`, `PpayMethod`, `PaddPoints`, `Pdate`) VALUES ('P00006', 'C0004', 'G008', 3, 90, 'online', 90, '2020/06/05');
INSERT INTO `SCMS`.`Customer_purchase_Goods` (`Pid`, `Customer_Cid`, `Goods_Gid`, `Pquantity`, `PtotalMoney`, `PpayMethod`, `PaddPoints`, `Pdate`) VALUES ('P00007', 'C0005', 'G001', 10, 28, 'VIPcard', 28, '2020/06/05');
INSERT INTO `SCMS`.`Customer_purchase_Goods` (`Pid`, `Customer_Cid`, `Goods_Gid`, `Pquantity`, `PtotalMoney`, `PpayMethod`, `PaddPoints`, `Pdate`) VALUES ('P00008', 'C0006', 'G002', 10, 50, 'online', 50, '2020/06/05');
INSERT INTO `SCMS`.`Customer_purchase_Goods` (`Pid`, `Customer_Cid`, `Goods_Gid`, `Pquantity`, `PtotalMoney`, `PpayMethod`, `PaddPoints`, `Pdate`) VALUES ('P00009', 'C0007', 'G011', 10, 590, 'VIPcard', 590, '2020/06/05');
INSERT INTO `SCMS`.`Customer_purchase_Goods` (`Pid`, `Customer_Cid`, `Goods_Gid`, `Pquantity`, `PtotalMoney`, `PpayMethod`, `PaddPoints`, `Pdate`) VALUES ('P00010', 'C0007', 'G006', 1, 5, 'VIPpoints', 0, '2020/06/06');
INSERT INTO `SCMS`.`Customer_purchase_Goods` (`Pid`, `Customer_Cid`, `Goods_Gid`, `Pquantity`, `PtotalMoney`, `PpayMethod`, `PaddPoints`, `Pdate`) VALUES ('P00011', 'C0008', 'G009', 3, 60, 'online', 60, '2020/06/06');
INSERT INTO `SCMS`.`Customer_purchase_Goods` (`Pid`, `Customer_Cid`, `Goods_Gid`, `Pquantity`, `PtotalMoney`, `PpayMethod`, `PaddPoints`, `Pdate`) VALUES ('P00012', 'C0007', 'G004', 5, 150, 'VIPcard', 150, '2020/06/06');
INSERT INTO `SCMS`.`Customer_purchase_Goods` (`Pid`, `Customer_Cid`, `Goods_Gid`, `Pquantity`, `PtotalMoney`, `PpayMethod`, `PaddPoints`, `Pdate`) VALUES ('P00013', 'C0011', 'G007', 2, 120, 'online', 120, '2020/06/06');
INSERT INTO `SCMS`.`Customer_purchase_Goods` (`Pid`, `Customer_Cid`, `Goods_Gid`, `Pquantity`, `PtotalMoney`, `PpayMethod`, `PaddPoints`, `Pdate`) VALUES ('P00014', 'C0012', 'G010', 1, 150, 'online', 150, '2020/06/06');
INSERT INTO `SCMS`.`Customer_purchase_Goods` (`Pid`, `Customer_Cid`, `Goods_Gid`, `Pquantity`, `PtotalMoney`, `PpayMethod`, `PaddPoints`, `Pdate`) VALUES ('P00015', 'C0014', 'G015', 40, 1000, 'online', 1000, '2020/06/06');
INSERT INTO `SCMS`.`Customer_purchase_Goods` (`Pid`, `Customer_Cid`, `Goods_Gid`, `Pquantity`, `PtotalMoney`, `PpayMethod`, `PaddPoints`, `Pdate`) VALUES ('P00016', 'C0015', 'G012', 70, 700, 'online', 700, '2020/06/06');
INSERT INTO `SCMS`.`Customer_purchase_Goods` (`Pid`, `Customer_Cid`, `Goods_Gid`, `Pquantity`, `PtotalMoney`, `PpayMethod`, `PaddPoints`, `Pdate`) VALUES ('P00017', 'C0017', 'G012', 70, 700, 'online', 700, '2020/06/06');
INSERT INTO `SCMS`.`Customer_purchase_Goods` (`Pid`, `Customer_Cid`, `Goods_Gid`, `Pquantity`, `PtotalMoney`, `PpayMethod`, `PaddPoints`, `Pdate`) VALUES ('P00018', 'C0018', 'G012', 50, 500, 'VIPcard', 500, '2020/06/06');
INSERT INTO `SCMS`.`Customer_purchase_Goods` (`Pid`, `Customer_Cid`, `Goods_Gid`, `Pquantity`, `PtotalMoney`, `PpayMethod`, `PaddPoints`, `Pdate`) VALUES ('P00019', 'C0018', 'G007', 5, 300, 'VIPcard', 300, '2020/06/07');

COMMIT;


-- -----------------------------------------------------
-- Data for table `SCMS`.`Goods_contract_Supplier`
-- -----------------------------------------------------
START TRANSACTION;
USE `SCMS`;
INSERT INTO `SCMS`.`Goods_contract_Supplier` (`CTid`, `Goods_Gid`, `Supplier_Sid`, `CTunitPrice`, `CTquantity`, `CTtotalMoney`, `CTdate`, `CTnote`) VALUES ('CT0002', 'G002', 'S001', 4, 161, 644, '2020/06/01', '');
INSERT INTO `SCMS`.`Goods_contract_Supplier` (`CTid`, `Goods_Gid`, `Supplier_Sid`, `CTunitPrice`, `CTquantity`, `CTtotalMoney`, `CTdate`, `CTnote`) VALUES ('CT0003', 'G003', 'S001', 8, 105, 840, '2020/06/01', '');
INSERT INTO `SCMS`.`Goods_contract_Supplier` (`CTid`, `Goods_Gid`, `Supplier_Sid`, `CTunitPrice`, `CTquantity`, `CTtotalMoney`, `CTdate`, `CTnote`) VALUES ('CT0004', 'G004', 'S002', 25, 203, 5075, '2020/06/01', '');
INSERT INTO `SCMS`.`Goods_contract_Supplier` (`CTid`, `Goods_Gid`, `Supplier_Sid`, `CTunitPrice`, `CTquantity`, `CTtotalMoney`, `CTdate`, `CTnote`) VALUES ('CT0005', 'G005', 'S002', 44, 160, 7040, '2020/06/01', '');
INSERT INTO `SCMS`.`Goods_contract_Supplier` (`CTid`, `Goods_Gid`, `Supplier_Sid`, `CTunitPrice`, `CTquantity`, `CTtotalMoney`, `CTdate`, `CTnote`) VALUES ('CT0006', 'G006', 'S002', 4.2, 310, 1302, '2020/06/01', '');
INSERT INTO `SCMS`.`Goods_contract_Supplier` (`CTid`, `Goods_Gid`, `Supplier_Sid`, `CTunitPrice`, `CTquantity`, `CTtotalMoney`, `CTdate`, `CTnote`) VALUES ('CT0007', 'G007', 'S003', 45, 120, 5400, '2020/06/01', '');
INSERT INTO `SCMS`.`Goods_contract_Supplier` (`CTid`, `Goods_Gid`, `Supplier_Sid`, `CTunitPrice`, `CTquantity`, `CTtotalMoney`, `CTdate`, `CTnote`) VALUES ('CT0008', 'G008', 'S002', 22, 223, 4906, '2020/06/01', '');
INSERT INTO `SCMS`.`Goods_contract_Supplier` (`CTid`, `Goods_Gid`, `Supplier_Sid`, `CTunitPrice`, `CTquantity`, `CTtotalMoney`, `CTdate`, `CTnote`) VALUES ('CT0009', 'G009', 'S001', 15, 150, 2250, '2020/06/01', '');
INSERT INTO `SCMS`.`Goods_contract_Supplier` (`CTid`, `Goods_Gid`, `Supplier_Sid`, `CTunitPrice`, `CTquantity`, `CTtotalMoney`, `CTdate`, `CTnote`) VALUES ('CT0010', 'G010', 'S002', 130, 101, 13130, '2020/06/01', '');
INSERT INTO `SCMS`.`Goods_contract_Supplier` (`CTid`, `Goods_Gid`, `Supplier_Sid`, `CTunitPrice`, `CTquantity`, `CTtotalMoney`, `CTdate`, `CTnote`) VALUES ('CT0011', 'G011', 'S002', 48, 210, 10080, '2020/06/01', '');
INSERT INTO `SCMS`.`Goods_contract_Supplier` (`CTid`, `Goods_Gid`, `Supplier_Sid`, `CTunitPrice`, `CTquantity`, `CTtotalMoney`, `CTdate`, `CTnote`) VALUES ('CT0012', 'G001', 'S001', 2, 255, 510, '2020/06/05', '');
INSERT INTO `SCMS`.`Goods_contract_Supplier` (`CTid`, `Goods_Gid`, `Supplier_Sid`, `CTunitPrice`, `CTquantity`, `CTtotalMoney`, `CTdate`, `CTnote`) VALUES ('CT0013', 'G012', 'S002', 5, 270, 1350, '2020/06/05', '');
INSERT INTO `SCMS`.`Goods_contract_Supplier` (`CTid`, `Goods_Gid`, `Supplier_Sid`, `CTunitPrice`, `CTquantity`, `CTtotalMoney`, `CTdate`, `CTnote`) VALUES ('CT0014', 'G013', 'S004', 20, 50, 1000, '2020/06/05', '');
INSERT INTO `SCMS`.`Goods_contract_Supplier` (`CTid`, `Goods_Gid`, `Supplier_Sid`, `CTunitPrice`, `CTquantity`, `CTtotalMoney`, `CTdate`, `CTnote`) VALUES ('CT0015', 'G014', 'S004', 250, 10, 2500, '2020/06/05', '');
INSERT INTO `SCMS`.`Goods_contract_Supplier` (`CTid`, `Goods_Gid`, `Supplier_Sid`, `CTunitPrice`, `CTquantity`, `CTtotalMoney`, `CTdate`, `CTnote`) VALUES ('CT0016', 'G015', 'S004', 18, 60, 1080, '2020/06/05', '');

COMMIT;


-- -----------------------------------------------------
-- Data for table `SCMS`.`Customer_return_Goods`
-- -----------------------------------------------------
START TRANSACTION;
USE `SCMS`;
INSERT INTO `SCMS`.`Customer_return_Goods` (`Rid`, `Customer_Cid`, `Purchase_Pid`, `Goods_Gname`, `Rquantity`, `Rreason`, `Rdate`, `Rstate`) VALUES ('R00002', 'C0008', 'P00011', '螺蛳粉', 3, '包装破损', '2020/06/08', 0);
INSERT INTO `SCMS`.`Customer_return_Goods` (`Rid`, `Customer_Cid`, `Purchase_Pid`, `Goods_Gname`, `Rquantity`, `Rreason`, `Rdate`, `Rstate`) VALUES ('R00003', 'C0011', 'P00013', '棒球帽', 2, '不需要了', '2020/06/08', 0);
INSERT INTO `SCMS`.`Customer_return_Goods` (`Rid`, `Customer_Cid`, `Purchase_Pid`, `Goods_Gname`, `Rquantity`, `Rreason`, `Rdate`, `Rstate`) VALUES ('R00004', 'C0012', 'P00014', '手表', 1, '质量问题', '2020/06/08', 0);
INSERT INTO `SCMS`.`Customer_return_Goods` (`Rid`, `Customer_Cid`, `Purchase_Pid`, `Goods_Gname`, `Rquantity`, `Rreason`, `Rdate`, `Rstate`) VALUES ('R00005', 'C0007', 'P00009', '碗', 5, '不想要了', '2020/06/08', 0);
INSERT INTO `SCMS`.`Customer_return_Goods` (`Rid`, `Customer_Cid`, `Purchase_Pid`, `Goods_Gname`, `Rquantity`, `Rreason`, `Rdate`, `Rstate`) VALUES ('R00006', 'C0007', 'P00010', '本子', 1, '不想要了', '2020/06/08', -1);
INSERT INTO `SCMS`.`Customer_return_Goods` (`Rid`, `Customer_Cid`, `Purchase_Pid`, `Goods_Gname`, `Rquantity`, `Rreason`, `Rdate`, `Rstate`) VALUES ('R00007', 'C0014', 'P00015', '西瓜', 1, '不需要了', '2020/06/08', 0);
INSERT INTO `SCMS`.`Customer_return_Goods` (`Rid`, `Customer_Cid`, `Purchase_Pid`, `Goods_Gname`, `Rquantity`, `Rreason`, `Rdate`, `Rstate`) VALUES ('R00008', 'C0015', 'P00016', '袜子', 1, '质量问题', '2020/06/08', 0);
INSERT INTO `SCMS`.`Customer_return_Goods` (`Rid`, `Customer_Cid`, `Purchase_Pid`, `Goods_Gname`, `Rquantity`, `Rreason`, `Rdate`, `Rstate`) VALUES ('R00009', 'C0017', 'P00017', '袜子', 1,'不想要了', '2020/06/08', 0);
INSERT INTO `SCMS`.`Customer_return_Goods` (`Rid`, `Customer_Cid`, `Purchase_Pid`, `Goods_Gname`, `Rquantity`, `Rreason`, `Rdate`, `Rstate`) VALUES ('R00010', 'C0018', 'P00018', '袜子', 1, '质量问题', '2020/06/08', 0);
INSERT INTO `SCMS`.`Customer_return_Goods` (`Rid`, `Customer_Cid`, `Purchase_Pid`, `Goods_Gname`, `Rquantity`, `Rreason`, `Rdate`, `Rstate`) VALUES ('R00011', 'C0018', 'P00019', '棒球帽', 1, '不想要了', '2020/06/09', 0);

COMMIT;


-- -----------------------------------------------------
-- Disable trigger `SCMS`.`Customer_return_Goods_AFTER_INSERT`
-- -----------------------------------------------------
DROP TRIGGER IF EXISTS `SCMS`.`Customer_return_Goods_AFTER_INSERT`;

SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
